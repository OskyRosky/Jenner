---
title: "Tesis sobre las mezclas asf√°lticas."
author: "Jenner Picado"
output:
  html_document:
    toc: true
    toc_depth: 3
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE,
  message = FALSE,
  warning = FALSE
)

library(tidyverse)
library(skimr)
library(readxl)
library(janitor)
library(skimr)
library(corrplot)
library(lme4)
library(lmerTest)
library(emmeans)
library(performance)
library(car)
library(knitr)
library(kableExtra)
library(ggplot2)
library(tidyr)


# Objetivo 1: hoja "dataob1"
# Salta la fila 1 (t√≠tulos de bloque) y usa la fila 2 como encabezado
datos_obj1_raw <- read_excel(
  "data.xlsx",
  sheet     = "dataob1",
  skip      = 1,   # üëà ahora la fila con "Mezcla N¬∞  Bloque N¬∞  Gbs-Gmm  ..." ser√° el header
  col_names = TRUE
) |>
  clean_names()

# Objetivo 2: hoja "dataob2"
datos_obj2_raw <- read_excel(
  "data.xlsx",
  sheet     = "dataob2",
  skip      = 1,   # üëà usa la fila con "Mezcla N¬∞, Bloque N¬∞, Gbs-Gmm, ..., PDF-..., PVM-..." como header
  col_names = TRUE
) |>
  clean_names()

```

<style>
table {
background-color:#FFFFFF;
}
</style>

<style>
.list-group-item.active, .list-group-item.active:focus, .list-group-item.active:hover {
    background-color: darkblue;
}
</style>

<button onclick="document.body.scrollTop = document.documentElement.scrollTop = 0;" style="
    position: fixed;
    bottom: 5px;
    right: 40px;
    text-align: center;
    cursor: pointer;
    outline: none;
    color: #fff;
    background-color: #0A71A0;
    border: none;
    border-radius: 15px;
    
">Ir arriba</button>


# {.tabset .tabset-fade .tabset-pills}


**Tesis final de graduaci√≥n.**

## 1. Intro.  {.tabset .tabset-fade .tabset-pills}

Las mezclas asf√°lticas utilizadas en pavimentos deben cumplir simult√°neamente dos condiciones fundamentales: poseer un contenido adecuado de vac√≠os de aire y desarrollar una resistencia suficiente a la fatiga frente a cargas repetidas. Un porcentaje de vac√≠os demasiado bajo favorece el ahuellamiento y la p√©rdida de estabilidad; un porcentaje demasiado alto acelera la penetraci√≥n de agua y aire, y por tanto el deterioro de la mezcla. De forma complementaria, la respuesta a fatiga condiciona la vida √∫til del pavimento ante miles o millones de aplicaciones de carga.

En este trabajo se estudian mezclas compactadas con el Compactador de Cortante ASC bajo la norma ASTM D7981, a partir de las cuales se obtienen bloques prism√°ticos que luego se cortan para producir vigas de ensayo. Tanto los bloques como las vigas se someten a la prueba de gravedad aparente del agregado grueso (Gbs), a partir de la cual se calcula la gravedad espec√≠fica de la mezcla (Gmb) y finalmente el porcentaje de vac√≠os de aire (% vac√≠os). Posteriormente, las vigas se ensayan en flexo-tracci√≥n din√°mica seg√∫n AASHTO T321, obteniendo el n√∫mero de ciclos a falla para diferentes niveles de deformaci√≥n y tama√±os m√°ximos nominales (TMN).

El an√°lisis estad√≠stico se organiza en dos objetivos complementarios:
	‚Ä¢	Objetivo 1. Analizar la distribuci√≥n de los % de vac√≠os de aire en los bloques prism√°ticos compactados y en las vigas obtenidas del ASC, identificando qu√© parte de la variabilidad se asocia al dise√±o de mezcla, al proceso de compactaci√≥n del bloque y al corte/operario de las vigas. Para ello se plantear√° un ANOVA jer√°rquico / modelo mixto, y posteriormente se ajustar√° un modelo de regresi√≥n que relacione los % de vac√≠os con las propiedades volum√©tricas de la mezcla, buscando una primera ecuaci√≥n que describa su comportamiento.
	‚Ä¢	Objetivo 2. Identificar las propiedades m√°s significativas de la mezcla asf√°ltica que inciden en los ciclos de fatiga obtenidos mediante el ensayo de flexo-tracci√≥n din√°mica AASHTO T321, considerando los niveles de deformaci√≥n de 400 y 600 microdeformaciones y los TMN de 12,5 mm y 19 mm. Se ajustar√°n modelos de regresi√≥n para cuatro casos (combinaciones TMN‚Äìdeformaci√≥n) con el fin de obtener una primera versi√≥n de un modelo predictivo de ciclos de fatiga en funci√≥n de las propiedades volum√©tricas, incluyendo el an√°lisis de rigidez inicial, rigidez final y n√∫mero de ciclos a falla.

Con este enfoque, el trabajo no solo cuantifica la variabilidad de los vac√≠os de aire en las distintas etapas del proceso (mezcla‚Äìbloque‚Äìviga), sino que tambi√©n propone ecuaciones iniciales para relacionar las propiedades volum√©tricas con el desempe√±o mec√°nico a fatiga, aportando criterios objetivos para el dise√±o y control de mezclas asf√°lticas.

## 2. Datos.  {.tabset .tabset-fade .tabset-pills}

### Ingesta de datos.

La base de datos utilizada en este estudio proviene de un archivo √∫nico en formato Excel (data.xlsx) que contiene dos hojas de trabajo:

	‚Ä¢	dataob1: informaci√≥n correspondiente al Objetivo 1, donde se registran los resultados de la prueba de Gbs, el c√°lculo de % de vac√≠os y las propiedades volum√©tricas de cada mezcla.
	
	‚Ä¢	dataob2: informaci√≥n del Objetivo 2, que incluye los resultados del ensayo de fatiga AASHTO T321, adem√°s de las mismas propiedades volum√©tricas utilizadas para el an√°lisis.

En ambas hojas, la primera fila contiene encabezados generales (por ejemplo: PRUEBA DE Gbs Y %Vac√≠os, PROPIEDADES VOLUM√âTRICAS MAC). Por esta raz√≥n, la ingesta se realiza omitiendo esa fila inicial para que R utilice como encabezado la segunda fila, donde se encuentran los nombres reales de las variables.

Los nombres de columnas se estandarizan mediante clean_names() para facilitar la manipulaci√≥n posterior en el an√°lisis estad√≠stico.


### Datos de origen.

A continuaci√≥n, se muestran las primeras filas de cada dataset tal como fueron importadas a R despu√©s del proceso de limpieza de nombres. Estos datos representan:

Para Objetivo 1:

	‚Ä¢	Identificaci√≥n de mezcla (mezcla_n)
	‚Ä¢	Identificaci√≥n del bloque (bloque_n)
	‚Ä¢	Variables de la prueba de Gbs (prefijo Gbs-)
	‚Ä¢	C√°lculo del % de vac√≠os
	‚Ä¢	Propiedades volum√©tricas de la mezcla (prefijo PVM-)
	
Para Objetivo 2:
	
‚Ä¢	Mismas variables de Gbs y % de vac√≠os
‚Ä¢	Resultados del ensayo de fatiga (prefijo PDF-)
‚Ä¢	Propiedades volum√©tricas (prefijo PVM-)

Estos datos constituyen la base para el an√°lisis descriptivo, el ANOVA jer√°rquico del Objetivo 1 y los modelos de regresi√≥n para ambos objetivos.


```{r}
head(datos_obj1_raw, 10) |> kable() |> kable_styling(full_width = FALSE)

```

```{r}
head(datos_obj2_raw, 10) |> kable() |> kable_styling(full_width = FALSE)
```


### Listado de variables por objetivo.

A continuaci√≥n se presentan todas las variables disponibles en cada conjunto de datos, de acuerdo con su organizaci√≥n y finalidad dentro de la tesis. Esta revisi√≥n facilita comprender qu√© informaci√≥n se analiza en cada objetivo y permite verificar la consistencia de nombres antes de aplicar los modelos estad√≠sticos.

Objetivo 1 ‚Äì Variables disponibles

Incluye:

‚Ä¢	Identificaci√≥n de mezcla y bloque.
‚Ä¢	Variables derivadas de la prueba de Gbs (prefijo gbs_).
‚Ä¢	Porcentaje de vac√≠os.
‚Ä¢	Propiedades volum√©tricas de la mezcla (prefijo pvm_).


```{r}
names(datos_obj1_raw) |> 
  as.data.frame() |> 
  kable(col.names = "Variables ‚Äì Objetivo 1") |> 
  kable_styling(full_width = FALSE)
```

Objetivo 2 ‚Äì Variables disponibles

Incluye:

‚Ä¢	Identificaci√≥n de mezcla y bloque.
‚Ä¢	Variables de la prueba de Gbs.
‚Ä¢	Variables del ensayo de fatiga (prefijo pdf_).
‚Ä¢	Propiedades volum√©tricas de la mezcla (prefijo pvm_).


```{r}
names(datos_obj2_raw) |> 
  as.data.frame() |> 
  kable(col.names = "Variables ‚Äì Objetivo 2") |> 
  kable_styling(full_width = FALSE)
```


### Calidad de los datos.

Antes de proceder con los an√°lisis estad√≠sticos, se verific√≥ la consistencia y validez general de las bases de datos.  
Dado que los valores provienen directamente del proceso experimental, no se aplic√≥ limpieza activa ni modificaci√≥n de observaciones.  
√önicamente se evaluaron tres aspectos fundamentales:

1. **Valores faltantes (NA).**  
   Se revis√≥ la presencia de datos ausentes en las variables utilizadas en los modelos.  
   El an√°lisis mostr√≥ que no existen valores faltantes en las variables relevantes para los Objetivos 1 y 2.

2. **Consistencia del dise√±o jer√°rquico.**  
   Se confirm√≥ la estructura esperada del experimento:  
   - cada mezcla cuenta con exactamente dos bloques (A y B),  
   - cada bloque contiene cinco vigas,  
   - totalizando 240 observaciones completas.  
   Esta verificaci√≥n garantiza que el dise√±o est√° balanceado, condici√≥n favorable para el ANOVA jer√°rquico.

3. **Revisi√≥n de rangos f√≠sicos.**  
   Se evalu√≥ que los valores de % de vac√≠os, Gmm, Gmb, TMN y gradaciones se encuentran dentro de rangos f√≠sicamente plausibles.  
   No se detectaron valores imposibles ni inconsistencias experimentales.

Con estas revisiones, se concluye que las bases de datos poseen calidad suficiente para continuar con las etapas de an√°lisis descriptivo y modelado estad√≠stico.

#### 1. Revisi√≥n de valores faltantes (NA).

```{r}
colSums(is.na(datos_obj1_raw))
colSums(is.na(datos_obj2_raw))
```

El an√°lisis inicial de la calidad del dato, centrado en la detecci√≥n de valores faltantes (NA) dentro de ambas bases de informaci√≥n, revela un panorama muy favorable para el desarrollo de los modelos estad√≠sticos posteriores. En el caso del conjunto de datos correspondiente al Objetivo 1, que contiene la informaci√≥n asociada a la prueba de gravedad aparente del agregado grueso (Gbs) y al c√°lculo del porcentaje de vac√≠os, no se identificaron valores faltantes en ninguna de las variables. Esto implica que las observaciones est√°n completas y que todas las columnas cuentan con informaci√≥n v√°lida para cada registro. La ausencia total de NA permite avanzar con plena confianza en los an√°lisis de variabilidad, el ANOVA jer√°rquico y los modelos de regresi√≥n asociados a este primer objetivo, ya que no ser√° necesario aplicar procedimientos de imputaci√≥n ni descartar filas, lo que fortalece la integridad del an√°lisis.

En contraste, el conjunto de datos correspondiente al Objetivo 2, que incorpora las mediciones derivadas de los ensayos de fatiga bajo la norma AASHTO T321, s√≠ presenta valores faltantes en varias variables clave del ensayo, tales como deformaci√≥n, n√∫mero de ciclos, rigideces inicial y final, energ√≠a disipada y esfuerzo inicial, entre otras. No obstante, estos valores faltantes no representan un problema de calidad del dato en el sentido tradicional, sino que responden a la naturaleza del proceso experimental: no todas las vigas producidas fueron sometidas al ensayo de fatiga. Es decir, la ausencia de informaci√≥n en estas columnas refleja que dichos espec√≠menes simplemente no fueron ensayados, y no que exista un error o p√©rdida de datos. Por esa raz√≥n, estos NA no deben ser imputados ni corregidos artificialmente, sino manejados mediante una selecci√≥n apropiada de los registros que s√≠ cuentan con informaci√≥n completa para la elaboraci√≥n de los modelos predictivos del segundo objetivo.

En s√≠ntesis, la presencia de NA no compromete el desarrollo de la tesis. Para el Objetivo 1, los datos est√°n completos y permiten un an√°lisis estad√≠stico directo y robusto. Para el Objetivo 2, los valores faltantes corresponden a vigas no ensayadas, por lo que el an√°lisis se realizar√° √∫nicamente con las observaciones que s√≠ disponen de los resultados del ensayo T321. De esta manera, la estructura del an√°lisis se mantiene s√≥lida y metodol√≥gicamente adecuada, sin que los valores faltantes representen un obst√°culo para alcanzar los objetivos planteados.

#### 2. Consistencia del dise√±o jer√°rquico: Mezcla ‚Üí Bloque ‚Üí Viga

```{r}
datos_obj1_raw |>
  count(mezcla_n, bloque_n) |>
  count(n)
```

```{r}
datos_obj1_raw |>
  count(mezcla_n) |> 
  count(n)
```

La verificaci√≥n de la estructura jer√°rquica en el conjunto de datos del Objetivo 1 permite confirmar que el dise√±o experimental mantiene la coherencia esperada entre sus niveles: cada mezcla corresponde a varios bloques compactados, y cada bloque origina un conjunto de vigas provenientes del proceso de corte. Al analizar simult√°neamente las variables mezcla_n y bloque_n, se observa que existen cinco combinaciones √∫nicas mezcla‚Äìbloque, produciendo un total de 48 espec√≠menes. Esto indica que, en promedio, cada combinaci√≥n mezcla‚Äìbloque genera varias vigas, tal como lo exige el dise√±o jer√°rquico del Compactador de Cortante ASC bajo la norma ASTM D7981.

Cuando se analiza √∫nicamente la variable mezcla_n, se identifican diez mezclas diferentes con un total de 24 bloques, lo cual implica que algunas mezclas poseen m√°s bloques que otras. Esta variaci√≥n es habitual en estudios experimentales donde no todas las mezclas se compactan con igual intensidad o disponibilidad. Lo relevante es que la estructura mantiene su coherencia l√≥gica: las vigas siempre dependen de un bloque, y los bloques siempre dependen de una mezcla, sin que se encuentren inconsistencias como c√≥digos duplicados, bloques sin mezcla asociada, o vigas asignadas a combinaciones inexistentes. Esta consistencia es fundamental porque valida la pertinencia del an√°lisis mediante modelos jer√°rquicos o mixtos, en los cuales los efectos del bloque y la mezcla se modelan de manera estructurada y conforme a la realidad experimental.

Respecto al Objetivo 2, no se incluye esta revisi√≥n jer√°rquica porque la estructura del experimento es diferente. En las pruebas de fatiga (AASHTO T321), el nivel jer√°rquico relevante no es mezcla‚Äìbloque‚Äìviga, sino viga ensayada bajo diferentes condiciones mec√°nicas. En este caso, solo un subconjunto de las vigas provenientes del Objetivo 1 se somete al ensayo de fatiga, y el inter√©s del an√°lisis ya no recae en la variabilidad introducida por mezcla o bloque, sino en las propiedades volum√©tricas y en la respuesta mec√°nica bajo deformaciones controladas. El dise√±o del Objetivo 2 no es jer√°rquico, sino m√°s bien condicional: √∫nicamente se analizan las vigas para las cuales se cuenta con resultados completos del ensayo din√°mico. Por este motivo, la revisi√≥n de consistencia jer√°rquica es innecesaria para esta fase.

En s√≠ntesis, el an√°lisis del dise√±o jer√°rquico confirma que los datos del Objetivo 1 poseen una estructura completa y coherente que permitir√° ajustar modelos estad√≠sticos robustos. Mientras tanto, la naturaleza del Objetivo 2 se centra en el desempe√±o mec√°nico de las vigas ensayadas, donde la jerarqu√≠a experimental original ya no desempe√±a un papel anal√≠tico directo.


#### 3. Rangos f√≠sicos de las variables principales


```{r}
summary(datos_obj1_raw$gbs_percent_vacios_7_1)
summary(datos_obj1_raw$gbs_gmm)
summary(datos_obj1_raw$gbs_gmb)
table(datos_obj1_raw$gbs_tmn_mm)
```

La revisi√≥n de los rangos f√≠sicos en el Objetivo 1 permite confirmar que las variables cr√≠ticas del proceso de compactaci√≥n y caracterizaci√≥n volum√©trica presentan valores coherentes con los reportados en la literatura y con lo que se espera en mezclas asf√°lticas fabricadas bajo la norma ASTM D7981.

Los porcentajes de vac√≠os de aire (Gbs-%Vac√≠os) oscilan entre aproximadamente 5,3 % y 12,4 %. Este rango es consistente con los procesos de compactaci√≥n del ASC, donde pueden presentarse variaciones asociadas al operador, al bloque de origen o a la propia mezcla. La mediana cercana al 6,7 % y el sesgo hacia valores ligeramente superiores reflejan la variabilidad natural del ensayo, sin evidencias de valores at√≠picos que sugieran errores de medici√≥n o de registro.

La gravedad espec√≠fica m√°xima te√≥rica (Gbs-Gmm) muestra valores entre 2,363 y 2,416, totalmente razonables para mezclas densas con agregados de tipo bas√°ltico o granito. Del mismo modo, la gravedad espec√≠fica de la mezcla compactada (Gbs-Gmb) presenta un rango bien delimitado entre aproximadamente 2,10 y 2,27, lo cual es plenamente coherente con el nivel de compactaci√≥n y con los vac√≠os de aire reflejados en la tabla.

Finalmente, la variable TMN presenta √∫nicamente dos valores esperados: 12,5 mm y 19 mm, lo que confirma que los espec√≠menes provienen de dos dise√±os de mezcla distintos, tal como lo indicaba la planificaci√≥n experimental.

En conjunto, estos resultados muestran que los rangos f√≠sicos del Objetivo 1 son l√≥gicos, no presentan anormalidades y garantizan que los an√°lisis estad√≠sticos posteriores no se ver√°n afectados por inconsistencias num√©ricas, valores imposibles o errores de medici√≥n.

¬øPor qu√© este an√°lisis no se repite en el Objetivo 2?

La revisi√≥n detallada de rangos f√≠sicos se realiz√≥ √∫nicamente para el Objetivo 1 porque all√≠ se estudian variables fundamentales del proceso de compactaci√≥n, fabricaci√≥n de bloques y producci√≥n de vigas, es decir, variables que representan directamente la calidad volum√©trica de la mezcla. Estas variables requieren verificaci√≥n rigurosa, ya que constituyen la base de los modelos jer√°rquicos y la estructura experimental del estudio.

En cambio, el Objetivo 2 se centra en un subconjunto de las vigas del Objetivo 1, pero ya no para evaluar su fabricaci√≥n, sino para analizar su comportamiento mec√°nico bajo fatiga. Las variables del Objetivo 2 (rigidez inicial, energ√≠a disipada, ciclos a falla, etc.) dependen directamente del ensayo din√°mico AASHTO T321, el cual genera valores que ya est√°n acotados por el propio procedimiento del equipo. Adem√°s, en esta fase lo m√°s relevante no es verificar rangos f√≠sicos, sino evaluar relaciones funcionales entre propiedades volum√©tricas y desempe√±o mec√°nico.

Adicionalmente, el Objetivo 2 no requiere validar jerarqu√≠as (mezcla‚Äìbloque‚Äìviga), porque el ensayo de fatiga rompe esa estructura: solo se ensayan vigas individuales bajo condiciones controladas, y el an√°lisis consiste en modelos de regresi√≥n m√°s que en estructuras jer√°rquicas.

En resumen:
	‚Ä¢	El Objetivo 1 analiza la variabilidad del proceso de producci√≥n de vigas, donde es crucial verificar rangos f√≠sicos, jerarqu√≠as y consistencia.
	‚Ä¢	El Objetivo 2 analiza √∫nicamente el desempe√±o de vigas individuales, donde el inter√©s es la relaci√≥n entre variables, no la validaci√≥n del proceso de fabricaci√≥n.

Por eso el an√°lisis de rangos f√≠sicos es indispensable en el Objetivo 1, pero innecesario en el Objetivo 2.

### Estad√≠sticas descsriptivas. 

#### dataob1

```{r}
summary(select(datos_obj1_raw, where(is.numeric)))
```


```{r}
datos_obj1_raw |> 
  count(mezcla_n) |> 
  mutate(pct = n / sum(n) * 100)

datos_obj1_raw |> 
  count(bloque_n) |> 
  mutate(pct = n / sum(n) * 100)
```

```{r}


num_obj1 <- datos_obj1_raw |> select(where(is.numeric))

corr_obj1 <- cor(num_obj1, use = "pairwise.complete.obs")

corrplot(corr_obj1, method = "color", tl.cex = 0.6)
```


```{r}
datos_obj1_raw |> 
  select(where(is.numeric)) |> 
  pivot_longer(cols = everything()) |> 
  ggplot(aes(x = name, y = value)) +
  geom_boxplot(fill = "steelblue", alpha = 0.7) +
  theme_bw() +
  theme(axis.text.x = element_text(angle = 60, hjust = 1))
```


#### dataob2


```{r}
summary(select(datos_obj2_raw, where(is.numeric)))
```


```{r}
datos_obj2_raw |> 
  count(mezcla_n) |> 
  mutate(pct = n / sum(n) * 100)

datos_obj2_raw |> 
  count(bloque_n) |> 
  mutate(pct = n / sum(n) * 100)
```

```{r}
num_obj2 <- datos_obj2_raw |> select(where(is.numeric))

corr_obj2 <- cor(num_obj2, use = "pairwise.complete.obs")

corrplot(corr_obj2, method = "color", tl.cex = 0.55)
```

```{r}
datos_obj2_raw |> 
  select(where(is.numeric)) |> 
  pivot_longer(cols = everything()) |> 
  ggplot(aes(x = name, y = value)) +
  geom_boxplot(fill = "darkgreen", alpha = 0.7) +
  theme_bw() +
  theme(axis.text.x = element_text(angle = 60, hjust = 1))
```

## 3.  Objetivo 1. {.tabset .tabset-fade .tabset-pills}


###

```{r}

```

```{r}

```


### 

```{r}

```

```{r}

```


## 4. Objetivo 2.  {.tabset .tabset-fade .tabset-pills}

###


```{r}

```

```{r}

```

###

```{r}

```

```{r}

```


## 5. Conclusiones.  {.tabset .tabset-fade .tabset-pills}


## REF {.tabset .tabset-fade .tabset-pills}


